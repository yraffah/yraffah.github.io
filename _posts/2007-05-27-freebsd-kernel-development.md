---
layout: post
title: !binary |-
  2KXYudin2K/YqSDYqNmG2KfYoSDYp9mE2YPZitix2YbZhCDZgdmKINmB2LHZ
  iiDYqNmKINil2LMg2K/Zig==
created: 1180269198
---
<p>الكثير منا يسمع عن أنظمة لينكس و يونكس و كيف أنها مجانية و مفتوحة المصدر و ما إلى ذلك من استخدامات عملية لها و كيف أن بعضها له استخدامات متخصصة بينما البعض الآخر للخوادم أو الأجهزة المكتبية والمحمولة أو لتشغيل الأفلام و مودمات الـ DSL و لكني لازلت أعتقد أن هناك نسبة أكثر من هؤلاء لم يسمعوا باللينكس أصلا و خصوصا في عالمنا العربي، للأسف!<br />
<br />
و لعل من أبرز ما يميز هذه الأنظمة عن غيرها (ويندوز و ماك OS X) أنه بإمكان المستخدم أن يعدل على الخصائص الأساسية للكيرنل بحيث يضيف دعم عتاد ما أو جهاز جديد أو يمكن إزالة دعم عتاد معين إن لزم الأمر، و هذا ما يجعل أمر استخدام هذه الأنظمة على أنواع مختلفة من الأجهزة (جوالات و ساعات و مودمات و أجهزة الترفيه سواء المنزلية أو التي تعمل في السيارات و الأجهزة المدمجة و إلخ) أمرا سهلا.<br />
<br />
بطبيعة الحال هذا العمل ليس للمبتدأين في عالم اللينكس أو اليونكس لأنه يعتبر من الخطوات المتقدمة في النظام و لكنه في نفس الوقت ليس بالأمر الصعب. و في هذا المقال سأكتب عن طريقة إعادة بناء الكيرنل لنظام فري بي إس دي يونكس (FreeBSD) إعتمادا على <a href="http://www.freebsd.org/handbook">كتيب التعليمات الخاص بـ فري بي إس دي</a>.<br />
<br />
إن النواة الإفتراضية التي تعمل في فري بي إس دي تُدعى GENERIC و هي تدعم عدد كبير جدا من العتاد الخاص بالجهاز سواء كروت شبكة أو&nbsp; أجهزة يو إس بي أو فايرواير أو حتى RAID Controllers، و بالتالي فإن استخدام كيرنل خاصة بالمستخدم له الميزات والفوائد التالية:</p>
<ol>
    <li>سرعة إقلاع أسرع للنظام لأنه لن يستغرق وقت في البحث عن عتاد النظام و محاولة التعرف عليه، بل سيقلع بسرعة أكبر لأنه يعلم العتاد الموجود على الجهاز.</li>
    <li>استخدام أقل للذاكرة و هذا أمر طبيعي لأن حجم الكيرنل سيكون أقل في الذاكرة.</li>
    <li>إضافة دعم لعتاد جديد غير مدعوم في النواة الإفتراضية مثل كروت الصوت و خلافه.</li>
</ol>
<p><br />
<br />
و للقيام بعمل كهذا فإنه يجب التعامل مع النظام من خلال سطر الأوامر و بالتالي، فكل ما هو مكتوب في الخطوات القادمة عبارة عن أوامر في الـ Terminal<br />
<br />
تعديل ملف الكيرنل<br />
سنفترض أن المجلد /usr/src/sys موجود في النظام و في حال عدم تواجده يجب مراجعة <a href="http://www.freebsd.org/doc/en_US.ISO8859-1/books/handbook/kernelconfig-building.html">دليل التعليمات الخاص بنظام فري بي إس دي</a><br />
<br />
<code> # cd /usr/src/sys/i386/conf<br />
# mkdir /root/kernels<br />
# cp GENERIC /root/kernels/MYKERNEL<br />
# ln -s /root/kernels/MYKERNEL</code></p>
<p><br />
السطر الأول ينقلك إلى المجلد المطلوب والذي يحتوي على الكيرنل الإفتراضية للنظام<br />
السطر الثاني يقوم بإنشاء مجلد اسمه kernels في المجلد الأساسي للمستخدم الجذري root<br />
السطر الثالث يقوم بنسخ ملف الكيرنل الإفتراضي إلى المجلد الجديد باسم MYKERNEL ليتم التعديل عليه<br />
ملاحظة: يمكنكم استخدام أي اسم غير MYKERNEL، شخصيا أستخدم LAPTOP على جهازي المحمول أو مثلا MAIL على جهاز خادم يعمل كخادم بريد.<br />
السطر الرابع يقوم بعمل إرتباط من الملف الجديد MYKERNEL في المجلد الذي نحن فيه و هو /usr/src/sys/i386/conf و الدليل على ذلك لو كتبنا السطر التالي لوجدنا إرتباطا من الملف MYKERNEL يشير إلى /root/kernels/MYKERNEL<br />
<code># ls -l /usr/src/sys/i386/conf</code><br />
<br />
الآن يمكننا تعديل الملف الجديد MYKERNEL والواقع في المجلد /root/kernels/ بأي محرر نصوص و لكن يفضل استخدام المحررات التي تعمل من سطر الأوامر مثل <a href="http://en.wikipedia.org/wiki/Nano_(text_editor)">nano</a> أو <a href="http://en.wikipedia.org/wiki/Pico_(text_editor)">pico</a> أو <a href="http://en.wikipedia.org/wiki/Vi">vi</a> أو <a href="http://en.wikipedia.org/wiki/Emacs">emacs</a> أو <a href="http://www.gsp.com/cgi-bin/man.cgi?section=1&amp;topic=ee">ee</a> أو أي محرر آخر تفضلونه، شخصيا أحب استخدام nano. و يفضل اتباع <a href="http://www.freebsd.org/doc/en_US.ISO8859-1/books/handbook/kernelconfig-config.html">الطريقة الموجودة في دليل التعليمات في موقع فري بي إس دي</a> <br />
<br />
كما يفضل دائما متابعة الملف /usr/src/UPDATING لمعرفة آخر التعديلات المهمة على النظام و دعم العتاد و ما إلى ذلك<br />
<br />
<strong> أخيرا عملية البناء</strong><br />
إنتقل إلى المجلد<br />
<code># cd /usr/src</code><br />
<br />
البدأ في عملية بناء الكيرنل، في حال استخدامك الاسم MYKERNEL أما في حال استخدامك لأي اسم آخر فقط قم باستبدال MYKERNEL بالاسم الذي اخترته<br />
<code># make buildkernel KERNCONF=MYKERNEL</code><br />
<br />
البدأ في عملية تثبيت الكيرنل الجديدة و لا تنسى استبدال الاسم بالذي اخترته في حال استخدامك لاسم آخر<br />
<code># make installkernel KERNCONF=MYKERNEL</code><br />
و بعد الإنتهاء من ذلك نقوم بإعادة إقلاع الجهاز من جديد ليعمل بالكيرنل الجديدة :)</p>
